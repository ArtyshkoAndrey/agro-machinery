{"version":3,"file":"dist/js/77f5f9858d7052808675.js","mappings":"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","sources":["webpack:///./resources/js/admin/pages/dashboard/samples/edit.vue?4b61","webpack:///resources/js/admin/pages/dashboard/samples/edit.vue","webpack:///./resources/js/admin/pages/dashboard/samples/edit.vue?c8d2","webpack:///./resources/js/admin/pages/dashboard/samples/edit.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('transition',{attrs:{\"appear\":\"\",\"name\":\"fade\"}},[(_vm.$root.$loading.show && _vm.loading)?_c('Loader',{key:\"1\"}):_c('div',{key:\"2\"},[_c('div',{staticClass:\"card p-4\"},[_c('div',{staticClass:\"card-title\"},[_c('h3',[_vm._v(_vm._s(_vm.$t('samples.edit.title'))+\" \\\"\"+_vm._s(_vm.sample.name)+\"\\\"\")])]),_vm._v(\" \"),_c('div',{staticClass:\"card-body px-0\"},[_vm._l((_vm.sample.days),function(day,index){return _c('div',{key:index,staticClass:\"row align-items-center my-2\"},[_c('div',{staticClass:\"col-lg-auto col-sm-2 col-4\"},[_c('p',{staticClass:\"mb-0\"},[_vm._v(\"\\n                \"+_vm._s(_vm.$t('samples.edit.day', {number: index + 1}))+\"\\n              \")])]),_vm._v(\" \"),_c('div',{staticClass:\"col-lg-auto col-sm-4 col-8\"},[_c('vs-select',{attrs:{\"disabled\":day.free,\"placeholder\":\"Курорты\"},model:{value:(day.resort.id),callback:function ($$v) {_vm.$set(day.resort, \"id\", $$v)},expression:\"day.resort.id\"}},_vm._l((_vm.resorts),function(resort){return _c('vs-option',{key:resort.id,attrs:{\"disabled\":day.free,\"label\":resort.name,\"value\":resort.id}},[_vm._v(\"\\n                  \"+_vm._s(resort.name)+\"\\n                \")])}),1)],1),_vm._v(\" \"),_c('div',{staticClass:\"col-lg-auto col-sm-2 col-6 mt-2 mt-lg-0\"},[_c('vs-checkbox',{model:{value:(day.free),callback:function ($$v) {_vm.$set(day, \"free\", $$v)},expression:\"day.free\"}},[_vm._v(\"\\n                \"+_vm._s(_vm.$t('samples.edit.free_day'))+\"\\n              \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"col-lg-auto col-sm-3 col-6 mt-2 mt-lg-0\"},[_c('vs-checkbox',{model:{value:(day.half_day),callback:function ($$v) {_vm.$set(day, \"half_day\", $$v)},expression:\"day.half_day\"}},[_vm._v(\"\\n                \"+_vm._s(_vm.$t('samples.edit.half_day'))+\"\\n              \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"col-lg-auto col-sm col-6 mt-2 mt-lg-0\"},[_c('vs-button',{attrs:{\"circle\":\"\",\"danger\":\"\",\"flat\":\"\"},on:{\"click\":function($event){return _vm.removeDay(index)}}},[_c('em',{staticClass:\"bx bx-trash-alt d-none d-lg-block\"}),_vm._v(\" \"),_c('span',{staticClass:\"d-block d-lg-none\"},[_vm._v(_vm._s(_vm.$t('form.delete')))])])],1),_vm._v(\" \"),_c('div',{staticClass:\"col-12\"},[_c('hr',{staticClass:\"d-block d-lg-none\"})])])}),_vm._v(\" \"),_c('div',{staticClass:\"row justify-content-between align-items-center mt-3\"},[_c('div',{staticClass:\"col-auto\"},[_c('vs-button',{attrs:{\"gradient\":\"\"},on:{\"click\":_vm.addDay}},[_vm._v(\"\\n                \"+_vm._s(_vm.$t('samples.edit.add_day'))+\"\\n              \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"col-auto\"},[_c('vs-button',{attrs:{\"success\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"\\n                \"+_vm._s(_vm.$t('form.save'))+\"\\n              \")])],1)])],2)])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <transition appear name=\"fade\">\n      <Loader v-if=\"$root.$loading.show && loading\" key=\"1\" />\n\n      <div v-else key=\"2\">\n        <div class=\"card p-4\">\n          <div class=\"card-title\">\n            <h3>{{ $t('samples.edit.title') }} \"{{ sample.name }}\"</h3>\n          </div>\n          <div class=\"card-body px-0\">\n            <div v-for=\"(day, index) in sample.days\" :key=\"index\" class=\"row align-items-center my-2\">\n              <div class=\"col-lg-auto col-sm-2 col-4\">\n                <p class=\"mb-0\">\n                  {{ $t('samples.edit.day', {number: index + 1}) }}\n                </p>\n              </div>\n              <div class=\"col-lg-auto col-sm-4 col-8\">\n                <vs-select v-model=\"day.resort.id\" :disabled=\"day.free\" placeholder=\"Курорты\">\n                  <vs-option v-for=\"resort in resorts\" :key=\"resort.id\" :disabled=\"day.free\" :label=\"resort.name\"\n                             :value=\"resort.id\"\n                  >\n                    {{ resort.name }}\n                  </vs-option>\n                </vs-select>\n              </div>\n              <div class=\"col-lg-auto col-sm-2 col-6 mt-2 mt-lg-0\">\n                <vs-checkbox v-model=\"day.free\">\n                  {{ $t('samples.edit.free_day') }}\n                </vs-checkbox>\n              </div>\n              <div class=\"col-lg-auto col-sm-3 col-6 mt-2 mt-lg-0\">\n                <vs-checkbox v-model=\"day.half_day\">\n                  {{ $t('samples.edit.half_day') }}\n                </vs-checkbox>\n              </div>\n              <div class=\"col-lg-auto col-sm col-6 mt-2 mt-lg-0\">\n                <vs-button\n                  circle\n                  danger\n                  flat\n                  @click=\"removeDay(index)\"\n                >\n                  <em class=\"bx bx-trash-alt d-none d-lg-block\" />\n                  <span class=\"d-block d-lg-none\">{{ $t('form.delete') }}</span>\n                </vs-button>\n              </div>\n              <div class=\"col-12\">\n                <hr class=\"d-block d-lg-none\">\n              </div>\n            </div>\n\n            <div class=\"row justify-content-between align-items-center mt-3\">\n              <div class=\"col-auto\">\n                <vs-button\n                  gradient\n                  @click=\"addDay\"\n                >\n                  {{ $t('samples.edit.add_day') }}\n                </vs-button>\n              </div>\n              <div class=\"col-auto\">\n                <vs-button\n                  success\n                  @click=\"save\"\n                >\n                  {{ $t('form.save') }}\n                </vs-button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport i18n from \"~/admin/plugins/i18n\";\nimport axios from 'axios'\nimport Loader from '~/admin/components/Loader.vue'\n\nexport default {\n  name: 'Edit',\n  components: {\n    Loader\n  },\n  metaInfo: {\n    title: i18n.t('samples.edit.title'),\n  },\n  data: () => ({\n    title: i18n.t('samples.edit.title'),\n    sample: {\n      days: []\n    },\n    resorts: [],\n    loading: true\n  }),\n  computed: {\n    id() {\n      return this.$route.params.id\n    }\n  },\n  async mounted() {\n    await axios.get('/api/samples/' + this.id)\n      .then(r => {\n        let sample = r.data.payload.sample\n        sample.days.forEach(day => {\n          if (day.resort === null) {\n            console.log(day)\n            day.resort = {\n              id: ''\n            }\n          }\n        })\n        this.sample = sample\n      })\n      .catch(e => {\n        if (e.response.status === 404) {\n          console.log(e.response.data)\n          this.$vs.notification({\n            title: 'Ошибка',\n            text: e.response.data.message\n          })\n\n          this.$router.push({name: 'dashboard.samples.index'})\n        }\n      })\n\n    await axios.get('/api/resorts')\n      .then(r => {\n        this.resorts = r.data.payload.resorts\n      })\n\n    await this.$root.$loading.finish()\n    this.loading = false\n  },\n  methods: {\n    addDay() {\n      let day = {\n        id: '',\n        order: '',\n        resort: {\n          id: ''\n        },\n        free: false,\n        half_day: false\n      }\n\n      this.sample.days.push(day)\n    },\n    removeDay(index) {\n      this.sample.days = this.sample.days.filter((el, i) => i !== index)\n    },\n    save() {\n      this.$root.$loading.start()\n      axios.put('/api/days', {\n        sample: this.sample\n      })\n        .then(r => {\n          this.$root.$loading.finish()\n          console.log('save data', r.data.payload)\n          this.$router.go(-1)\n\n        })\n        .catch(e => {\n          this.$root.$loading.finish()\n          if (e.response.status === 422) {\n            this.$vs.notification({\n              title: 'Ошибка',\n              text: e.response.data.message\n            })\n\n            Object.keys(e.response.data.errors).forEach((key) => {\n              this.$vs.notification({\n                title: key.capitalize(),\n                text: e.response.data.errors[key]\n              })\n            })\n          } else if (e.response.status === 404) {\n            this.$vs.notification({\n              title: 'Ошибка',\n              text: e.response.data.message\n            })\n          }\n        })\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit.vue?vue&type=template&id=15b25140&scoped=true&\"\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15b25140\",\n  null\n  \n)\n\nexport default component.exports"],"names":["name","components","Loader","metaInfo","title","i18n","data","computed","id","this","$route","params","methods","addDay","sample","days","push","order","resort","free","half_day","removeDay","filter","save","$root","$loading","start","_vm","_h","$createElement","_c","_self","attrs","show","loading","key","staticClass","_v","_s","$t","_l","day","index","number","model","value","callback","$$v","$set","expression","on","$event"],"sourceRoot":""}