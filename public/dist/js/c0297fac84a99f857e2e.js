"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[186],{6174:(t,e,n)=>{n.d(e,{Z:()=>r});var s=n(7897),a=n.n(s),i=n(1519),o=n.n(i)()(a());o.push([t.id,".slide-fade-enter-active[data-v-86317376]{transition:all .3s ease}.slide-fade-leave-active[data-v-86317376]{transition:all .3s cubic-bezier(1,.5,.8,1)}.slide-fade-enter[data-v-86317376],.slide-fade-leave-to[data-v-86317376]{opacity:0;transform:translateX(10px)}","",{version:3,sources:["webpack://./resources/js/admin/pages/dashboard/invoice/create.vue"],names:[],mappings:"AA0OA,0CACA,uBACA,CAEA,0CACA,0CACA,CAEA,yEAIA,SAAA,CADA,0BAEA",sourcesContent:['<template>\n  <transition appear mode="out-in" name="fade">\n    <Loader v-if="$root.$loading.show" key="1" />\n\n    <div v-else id="groupCollapse" key="2">\n      <div class="row justify-content-center mb-5">\n        <div class="col-12 col-mg-8 col-lg justify-content-center">\n          <Stepper :bus="bus" :count="6" />\n        </div>\n      </div>\n\n      <div class="row mx-0">\n        <div class="col-12">\n          <transition appear mode="out-in" name="slide-fade">\n            <Step_1 v-if="stepForm === 1" key="1" :companies="companies" />\n            <Step_2 v-if="stepForm === 2" key="2" />\n            <Step_3 v-if="stepForm === 3" key="3" :hotels-own="form.hotels" />\n            <Step_4 v-if="stepForm === 4" key="4" :transfer-data="form.transfer" />\n            <Step_5 v-if="stepForm === 5" key="5" :sample="form.sample" />\n            <Step_6 v-if="stepForm === 6" key="6" :hotline="form.hotline" />\n          </transition>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n<script>\nimport Vue from \'vue\'\nimport axios from \'axios\'\nimport Stepper from \'~/admin/components/Stepper.vue\'\nimport Step_1 from "~/admin/components/Steps/Step_1.vue"\nimport Step_2 from "~/admin/components/Steps/Step_2.vue"\nimport Step_3 from "~/admin/components/Steps/Step_3.vue"\nimport Step_4 from "~/admin/components/Steps/Step_4.vue"\nimport Step_5 from "~/admin/components/Steps/Step_5.vue"\nimport Step_6 from "~/admin/components/Steps/Step_6.vue";\nimport Loader from "~/admin/components/Loader.vue"\n\nexport default {\n  name: "Create",\n  components: {\n    Stepper,\n    Step_1,\n    Step_2,\n    Step_3,\n    Step_4,\n    Step_5,\n    Step_6,\n    Loader\n  },\n  data: () => ({\n    stepForm: 1,\n    bus: new Vue(),\n    companies: [],\n    form: {\n      company: \'\',\n      user: {\n        name: \'\',\n        nationality: \'\'\n      },\n      hotels: [],\n      transfer: null,\n      sample: null,\n      hotline: {\n        phone: \'\',\n        cost: \'\'\n      }\n    }\n  }),\n  computed: {\n    step: {\n      get: function () {\n        return this.stepForm\n      },\n\n      set: function (value) {\n        console.log("Пришло на set", value)\n        if (value < 0 || value > 6) {\n          this.$vs.notification({\n            duration: 2000,\n            sticky: true,\n            position: \'top-right\',\n            color: \'danger\',\n            title: \'Ошибка!\',\n            text: \'Вы ушли за границу данных\'\n          })\n        } else {\n          this.stepForm = value\n          console.log("Сохранило в set", value)\n        }\n      }\n    },\n\n    companyError() {\n      if (this.form.company === \'\' || this.form.company === null) {\n        return this.$t(\'invoice.errors.company\')\n      }\n\n      return false\n    },\n\n    userNameError() {\n      if (this.form.user.name === \'\' || this.form.user.name === null) {\n        return this.$t(\'invoice.errors.user.name\')\n      }\n\n      return false\n    },\n    userNationalityError() {\n      if (this.form.user.nationality === \'\' || this.form.user.nationality === null) {\n        return this.$t(\'invoice.errors.user.nationality\')\n      }\n\n      return false\n    }\n  },\n  async mounted() {\n\n    this.bus.$on(\'changeStep\', this.changeStep)\n\n    await axios.get(\'/api/companies\')\n      .then(r => {\n        this.companies = r.data.payload.companies\n      })\n      .catch(e => {\n        this.$vs.notification({\n          title: this.$t(\'notification.get.danger.title\'),\n          text: this.$t(\'notification.get.danger.text\')\n        })\n      })\n\n    await this.$root.$loading.finish()\n  },\n  methods: {\n    changeStep(index) {\n      console.log(\'changeStep\', index)\n      this.step = index\n    },\n\n    notifyError() {\n      this.$vs.notification({\n        duration: 2000,\n        sticky: true,\n        position: \'top-right\',\n        color: \'danger\',\n        title: this.$t(\'invoice.errors.validateInputs.title\'),\n        text: this.$t(\'invoice.errors.validateInputs.text\')\n      })\n    },\n\n    next(callback) {\n      if (this.step === 1) {\n        if (this.companyError) {\n          this.notifyError()\n\n          return false\n        }\n        this.bus.$emit(\'setStatus\', {\n          step: this.step,\n          status: \'success\'\n        })\n      } else if (this.step === 2) {\n        if (this.userNationalityError || this.userNameError) {\n          this.notifyError()\n\n          return false\n        }\n        this.bus.$emit(\'setStatus\', {\n          step: this.step,\n          status: \'success\'\n        })\n      } else if (this.step === 3) {\n        this.bus.$emit(\'setStatus\', {\n          step: this.step,\n          status: \'success\'\n        })\n      } else if (this.step === 4) {\n        this.bus.$emit(\'setStatus\', {\n          step: this.step,\n          status: \'success\'\n        })\n      } else if (this.step === 5) {\n        this.bus.$emit(\'setStatus\', {\n          step: this.step,\n          status: \'success\'\n        })\n      } else if (this.step === 6) {\n        this.createInvoice()\n      }\n      if (typeof callback === \'function\') {\n        callback()\n      }\n    },\n\n    createInvoice() {\n      this.loading = true\n      axios.post("/api/invoices", {\n        ...this.form\n      })\n        .then(r => {\n          if (r.data.success) {\n            this.$router.push({name: \'dashboard.invoice.show\', params: {id: r.data.payload.invoice.id}})\n          } else {\n            this.notifyError()\n          }\n        })\n        .catch(e => {\n          if (e.response.status === 422) {\n            this.$vs.notification({\n              title: \'Ошибка\',\n              text: e.response.data.message\n            })\n\n            Object.keys(e.response.data.errors).forEach((key) => {\n              this.$vs.notification({\n                title: key.capitalize(),\n                text: e.response.data.errors[key]\n              })\n            })\n          } else if (e.response.status === 404) {\n            this.$vs.notification({\n              title: \'Ошибка\',\n              text: e.response.data.message\n            })\n          }\n        })\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n/* Анимации появления и исчезновения могут иметь */\n/* различные продолжительности и динамику.       */\n.slide-fade-enter-active {\n  transition: all .3s ease;\n}\n\n.slide-fade-leave-active {\n  transition: all .3s cubic-bezier(1.0, 0.5, 0.8, 1.0);\n}\n\n.slide-fade-enter, .slide-fade-leave-to\n  /* .slide-fade-leave-active до версии 2.1.8 */\n{\n  transform: translateX(10px);\n  opacity: 0;\n}\n</style>'],sourceRoot:""}]);const r=o},8219:(t,e,n)=>{n.d(e,{Z:()=>r});var s=n(7897),a=n.n(s),i=n(1519),o=n.n(i)()(a());o.push([t.id,'.wrapper_step[data-v-25317d48]{margin-left:30px;margin-right:30px;padding:0}.wrapper_step[data-v-25317d48]:first-child{margin-left:0}.wrapper_step[data-v-25317d48]:last-child{margin-right:0}.wrapper_step:last-child .some_step[data-v-25317d48]:after{content:none}.some_step[data-v-25317d48]{background:transparent;border-color:rgb(var(--vs-gray-4))!important;cursor:pointer;height:40px;position:relative;width:40px}.some_step[data-v-25317d48]:after{background:rgb(var(--vs-gray-4))!important;content:"";display:block;height:2px;left:40px;position:absolute;top:calc(50% - 2px);width:60px}.some_step.active[data-v-25317d48]{background:rgb(var(--vs-primary));border-color:rgb(var(--vs-primary))!important;color:#fff}.some_step.success[data-v-25317d48]{background:rgb(var(--vs-success));border-color:rgb(var(--vs-success))!important;color:#fff}',"",{version:3,sources:["webpack://./resources/js/admin/components/Stepper.vue"],names:[],mappings:"AAsGA,+BAGE,gBAAA,CACA,iBAAA,CAHA,SAnGF,CAwGE,2CACE,aAtGJ,CAwGE,0CACE,cAtGJ,CAyGM,2DACE,YAvGR,CA6GA,4BACE,sBAAA,CAKA,4CAAA,CAFA,cAAA,CAFA,WAAA,CAGA,iBAAA,CAFA,UAvGF,CA6GE,kCAOE,0CAAA,CANA,UAAA,CACA,aAAA,CAEA,UAAA,CAIA,SAAA,CALA,iBAAA,CAEA,mBAAA,CACA,UAzGJ,CA8GE,mCACE,iCAAA,CACA,6CAAA,CACA,UA5GJ,CA+GE,oCACE,iCAAA,CACA,6CAAA,CACA,UA7GJ",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.wrapper_step {\n  padding: 0;\n\n  margin-left: 30px;\n  margin-right: 30px;\n\n  &:first-child {\n    margin-left: 0;\n  }\n  &:last-child {\n    margin-right: 0;\n\n    .some_step {\n      &:after {\n        content: none;\n      }\n    }\n  }\n}\n\n.some_step {\n  background: transparent;\n  height: 40px;\n  width: 40px;\n  cursor: pointer;\n  position: relative;\n  border-color: rgb(var(--vs-gray-4)) !important;\n\n\n  &:after {\n    content: '';\n    display: block;\n    position: absolute;\n    height: 2px;\n    top: calc(50% - 2px);\n    width: 60px;\n    background: rgb(var(--vs-gray-4)) !important;\n    left: 40px;\n  }\n\n  &.active {\n    background: rgb(var(--vs-primary));\n    border-color: rgb(var(--vs-primary)) !important;\n    color: white;\n  }\n\n  &.success {\n    background: rgb(var(--vs-success));\n    border-color: rgb(var(--vs-success)) !important;\n    color: white;\n  }\n}\n"],sourceRoot:""}]);const r=o},7096:(t,e,n)=>{n.d(e,{Z:()=>l});var s=n(538);const a={name:"Stepper",props:{count:{type:Number,required:!1,default:5},successfully:{type:Boolean,required:!1,default:!1},bus:{type:s.default,required:!0}},data:function(){return{steps:[],localStep:{}}},mounted:function(){for(var t,e=0;e<this.count;)t=this.successfully?"success":"default",0===e&&(t="active",this.localStep={step:e+1,status:this.successfully?"success":"default"}),this.steps.push({status:t,step:e+1}),e++;this.bus.$on("setStatus",this.setStatus)},methods:{setStatus:function(t){var e=this.steps.find((function(e){return e.step===t.step+1}));this.localStep.step===t.step&&(this.localStep.status=t.status),console.log("load new Status",e),this.setStatusStep(e)},setStatusStep:function(t){var e=this;if(console.log("parent step","default"===t.status&&"default"===this.localStep.status),"default"===t.status&&t.step-this.localStep.step>=1&&"default"===t.status&&"default"===this.localStep.status)return console.log("set step if False"),!1;var n=this.steps.find((function(t){return t.step===e.localStep.step}));n.status=this.localStep.status,console.log("is this step",n),this.localStep={step:t.step,status:t.status},t.status="active",console.log("new step",t),this.bus.$emit("changeStep",t.step)}}};var i=n(3379),o=n.n(i),r=n(8219),c={insert:"head",singleton:!1};o()(r.Z,c);r.Z.locals;const l=(0,n(1900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row justify-content-center w-100"},t._l(t.steps,(function(e){return n("div",{staticClass:"d-flex w-auto wrapper_step"},[n("div",{staticClass:"border some_step d-flex justify-content-center align-items-center rounded-circle",class:e.status,on:{click:function(n){return t.setStatusStep(e)}}},["success"===e.status?n("i",{staticClass:"bx bx-check",attrs:{"aria-hidden":"true"}}):n("span",{staticClass:"d-flex"},[t._v(t._s(e.step))])])])})),0)}),[],!1,null,"25317d48",null).exports},1839:(t,e,n)=>{n.d(e,{Z:()=>a});const s={name:"Step1",props:{companies:{required:!0,type:Array}}};const a=(0,n(1900).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-title px-3 pb-2 pt-4"},[n("h6",{staticClass:"fw-light text-reset"},[t._v("\n      "+t._s(t.$t("invoice.create.words.step"))+" 1 "+t._s(t.$t("invoice.create.words.in"))+" 6 "),n("span",{staticClass:"fw-bolder"},[t._v(t._s(t.$t("invoice.create.step_1.title")))])])]),t._v(" "),n("div",{staticClass:"card-body p-0 pb-3"},[n("div",{staticClass:"mx-3 my-2"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-6 col-lg-4"},[n("vs-select",{staticClass:"mw-100",attrs:{placeholder:t.$t("invoice.inputs.company_name")},scopedSlots:t._u([t.$parent.companyError?{key:"message-danger",fn:function(){return[t._v("\n              "+t._s(t.$parent.companyError)+"\n            ")]},proxy:!0}:null],null,!0),model:{value:t.$parent.form.company,callback:function(e){t.$set(t.$parent.form,"company",e)},expression:"$parent.form.company"}},[t._v(" "),t._l(t.companies,(function(e){return n("vs-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v("\n              "+t._s(e.name)+"\n            ")])}))],2)],1),t._v(" "),n("div",{staticClass:"col-12 col-md-6 col-lg-4 mt-2 mt-md-0"},[n("vs-select",{staticClass:"mw-100",attrs:{placeholder:t.$t("invoice.inputs.company_ref")},scopedSlots:t._u([t.$parent.companyError?{key:"message-danger",fn:function(){return[t._v("\n              "+t._s(t.$parent.companyError)+"\n            ")]},proxy:!0}:null],null,!0),model:{value:t.$parent.form.company,callback:function(e){t.$set(t.$parent.form,"company",e)},expression:"$parent.form.company"}},[t._v(" "),t._l(t.companies,(function(e){return n("vs-option",{key:e.id,attrs:{label:e.code,value:e.id}},[t._v("\n              "+t._s(e.code)+"\n            ")])}))],2)],1)]),t._v(" "),n("div",{staticClass:"row justify-content-end"},[n("div",{staticClass:"col-auto"},[n("vs-button",{attrs:{flat:""},on:{click:t.$parent.next},scopedSlots:t._u([!1===t.$parent.companyError?{key:"animate",fn:function(){return[n("i",{staticClass:"bx bx-right-arrow-alt fs-2",attrs:{"aria-hidden":"true"}})]},proxy:!0}:{key:"animate",fn:function(){return[n("i",{staticClass:"bx bx-x fs-2",attrs:{"aria-hidden":"true"}})]},proxy:!0}],null,!0)},[t._v("\n            "+t._s(t.$t("invoice.buttons.next"))+"\n\n            ")])],1)])])])])}),[],!1,null,"485e2fc4",null).exports},6644:(t,e,n)=>{n.d(e,{Z:()=>a});const s={name:"Step2"};const a=(0,n(1900).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-title px-3 pb-2 pt-4"},[n("h6",{staticClass:"fw-light text-reset"},[t._v("\n      "+t._s(t.$t("invoice.create.words.step"))+" 2 "+t._s(t.$t("invoice.create.words.in"))+" 6 "),n("span",{staticClass:"fw-bolder"},[t._v(t._s(t.$t("invoice.create.step_2.title")))])])]),t._v(" "),n("div",{staticClass:"card-body p-0 pb-3"},[n("div",{staticClass:"mx-3 my-2"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-6 col-lg-4"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.user.name")},scopedSlots:t._u([{key:"icon",fn:function(){return[n("i",{staticClass:"bx bx-user",attrs:{"aria-hidden":"true"}})]},proxy:!0},t.$parent.userNameError?{key:"message-danger",fn:function(){return[t._v("\n              "+t._s(t.$parent.userNameError)+"\n            ")]},proxy:!0}:null],null,!0),model:{value:t.$parent.form.user.name,callback:function(e){t.$set(t.$parent.form.user,"name",e)},expression:"$parent.form.user.name"}})],1),t._v(" "),n("div",{staticClass:"col-12 col-md-6 mt-2 mt-md-0 col-lg-4"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.user.nationality")},scopedSlots:t._u([{key:"icon",fn:function(){return[n("i",{staticClass:"bx bx-globe",attrs:{"aria-hidden":"true"}})]},proxy:!0},t.$parent.userNationalityError?{key:"message-danger",fn:function(){return[t._v("\n              "+t._s(t.$parent.userNationalityError)+"\n            ")]},proxy:!0}:null],null,!0),model:{value:t.$parent.form.user.nationality,callback:function(e){t.$set(t.$parent.form.user,"nationality",e)},expression:"$parent.form.user.nationality"}})],1)]),t._v(" "),n("div",{staticClass:"row justify-content-end"},[n("div",{staticClass:"col-auto"},[n("vs-button",{attrs:{flat:""},on:{click:t.$parent.next},scopedSlots:t._u([!1===t.$parent.userNationalityError&&!1===t.$parent.userNameError?{key:"animate",fn:function(){return[n("i",{staticClass:"bx bx-right-arrow-alt fs-2",attrs:{"aria-hidden":"true"}})]},proxy:!0}:{key:"animate",fn:function(){return[n("i",{staticClass:"bx bx-x fs-2",attrs:{"aria-hidden":"true"}})]},proxy:!0}],null,!0)},[t._v("\n            "+t._s(t.$t("invoice.buttons.next"))+"\n\n            ")])],1)])])])])}),[],!1,null,"c5f364da",null).exports},3925:(t,e,n)=>{n.d(e,{Z:()=>d});var s=n(7757),a=n.n(s),i=n(5703),o=n(9669),r=n.n(o);function c(t,e,n,s,a,i,o){try{var r=t[i](o),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(s,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(s,a){var i=t.apply(e,n);function o(t){c(i,s,a,o,r,"next",t)}function r(t){c(i,s,a,o,r,"throw",t)}o(void 0)}))}}const u={name:"Step3",components:{Loader:i.Z},props:{hotelsOwn:{type:Array,require:!1,default:null}},data:function(){return{hotels:[],rooms:[],loading:!0,h:[]}},computed:{disabledNext:function(){var t=!1;return 0===this.h.length&&(t=!0),this.h.forEach((function(e){""!==e.hotel_id&&""!==e.room_type_id&&""!==e.count&&""!==e.adults&&""!==e.children&&""!==e.check_in&&""!==e.check_out&&""!==e.booking_number||(t=!0)})),t}},mounted:function(){var t=this;return l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getHotels();case 2:return e.next=4,t.getRooms();case 4:if(!(t.hotelsOwn instanceof Array)){e.next=14;break}if(!(t.hotelsOwn.length>0)){e.next=10;break}t.h=t.hotelsOwn,t.loading=!1,e.next=12;break;case 10:return e.next=12,t.createNewHotel();case 12:e.next=16;break;case 14:return e.next=16,t.createNewHotel();case 16:case"end":return e.stop()}}),e)})))()},methods:{getHotels:function(){var t=this;return l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r().get("/api/hotels").then((function(e){e.data.success?t.hotels=e.data.payload.hotels:(t.$vs.notification({title:t.$t("notification.get.danger.title"),text:t.$t("notification.get.danger.text")}),t.$router.push({name:"dashboard.invoices.index"}))})).catch((function(e){t.$vs.notification({title:t.$t("notification.get.danger.title"),text:t.$t("notification.get.danger.text")})}));case 2:case"end":return e.stop()}}),e)})))()},getRooms:function(){var t=this;return l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r().get("/api/room_types").then((function(e){e.data.success?t.rooms=e.data.payload.room_types:(t.$vs.notification({title:t.$t("notification.get.danger.title"),text:t.$t("notification.get.danger.text")}),t.$router.push({name:"dashboard.invoices.index"}))})).catch((function(e){t.$vs.notification({title:t.$t("notification.get.danger.title"),text:t.$t("notification.get.danger.text")})}));case 2:case"end":return e.stop()}}),e)})))()},createNewHotel:function(){this.h.push({hotel_id:"",room_type_id:"",count:"",extra_bed:!1,adults:"1",children:"0",bb:"BB",check_in:"",check_out:"",booking_number:""}),this.loading=!1},removeHotel:function(t){this.h.splice(t,1)},next:function(){var t=this;this.$parent.next((function(){t.$parent.form.hotels=t.h}))}}};const d=(0,n(1900).Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-title px-3 pb-2 pt-4"},[n("h6",{staticClass:"fw-light text-reset"},[t._v("\n      "+t._s(t.$t("invoice.create.words.step"))+" 3 "+t._s(t.$t("invoice.create.words.in"))+" 6 "),n("span",{staticClass:"fw-bolder"},[t._v(t._s(t.$t("invoice.create.step_3.title")))])])]),t._v(" "),t.loading?n("div",{staticClass:"card-body"},[n("Loader")],1):n("div",{staticClass:"card-body p-0 pb-3"},[n("div",{staticClass:"mx-3 my-2"},[t._l(t.h,(function(e,s){return n("div",{key:s,staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-6 col-lg-4"},[n("vs-select",{staticClass:"mw-100",attrs:{placeholder:t.$t("invoice.inputs.hotel_name")},model:{value:e.hotel_id,callback:function(n){t.$set(e,"hotel_id",n)},expression:"hotel.hotel_id"}},t._l(t.hotels,(function(e){return n("vs-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v("\n                  "+t._s(e.name)+"\n                ")])})),1)],1),t._v(" "),n("div",{staticClass:"d-none d-md-block col-auto"},[n("vs-button",{attrs:{danger:""},on:{click:function(e){return t.removeHotel(s)}}},[t._v("\n                "+t._s(t.$t("form.delete"))+"\n              ")])],1)]),t._v(" "),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col-12 col-md-6 col-lg-3"},[n("vs-select",{staticClass:"mw-100",attrs:{placeholder:t.$t("invoice.inputs.room_type")},model:{value:e.room_type_id,callback:function(n){t.$set(e,"room_type_id",n)},expression:"hotel.room_type_id"}},t._l(t.rooms,(function(e){return n("vs-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v("\n                  "+t._s(e.name)+"\n                ")])})),1)],1),t._v(" "),n("div",{staticClass:"col col-md-6 mt-2 mt-md-0 col-lg-3"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.countable"),inputmode:"numeric",pattern:"[0-9]*",type:"number"},model:{value:e.count,callback:function(n){t.$set(e,"count",t._n(n))},expression:"hotel.count"}})],1),t._v(" "),n("div",{staticClass:"col-auto mt-2 mt-md-0"},[n("vs-checkbox",{model:{value:e.extra_bed,callback:function(n){t.$set(e,"extra_bed",n)},expression:"hotel.extra_bed"}},[t._v("\n                "+t._s(t.$t("invoice.inputs.extra_bed"))+"\n              ")])],1)]),t._v(" "),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col-12 mt-2 mt-md-0 col-md-4 col-lg-3"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.adults"),inputmode:"numeric",pattern:"[0-9]*",type:"number"},model:{value:e.adults,callback:function(n){t.$set(e,"adults",t._n(n))},expression:"hotel.adults"}})],1),t._v(" "),n("div",{staticClass:"col-12 col-md-4 mt-2 mt-md-0 col-lg-3"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.children"),inputmode:"numeric",pattern:"[0-9]*",type:"number"},model:{value:e.children,callback:function(n){t.$set(e,"children",t._n(n))},expression:"hotel.children"}})],1)]),t._v(" "),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col-12 col-md-6 col-lg-4"},[n("vs-select",{attrs:{placeholder:t.$t("invoice.inputs.bb")},model:{value:e.bb,callback:function(n){t.$set(e,"bb",n)},expression:"hotel.bb"}},[n("vs-option",{attrs:{label:"BB",value:"BB"}},[t._v("\n                  "+t._s(t.$t("invoice.inputs.bb"))+"\n                ")])],1)],1)]),t._v(" "),n("div",{staticClass:"row mt-5 mb-4"},[n("div",{staticClass:"col-12"},[n("h6",{staticClass:"text-reset"},[t._v("\n                "+t._s(t.$t("invoice.create.step_3.date_title"))+"\n              ")])])]),t._v(" "),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col-6 col-md-4 col-lg-3"},[n("vs-input",{attrs:{label:t.$t("invoice.inputs.check_in"),type:"datetime-local"},model:{value:e.check_in,callback:function(n){t.$set(e,"check_in",n)},expression:"hotel.check_in"}})],1),t._v(" "),n("div",{staticClass:"col-6 col-md-4 col-lg-3"},[n("vs-input",{attrs:{label:t.$t("invoice.inputs.check_out"),type:"datetime-local"},model:{value:e.check_out,callback:function(n){t.$set(e,"check_out",n)},expression:"hotel.check_out"}})],1)]),t._v(" "),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col-12 col-md-4 col-lg-3"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.booking_number")},model:{value:e.booking_number,callback:function(n){t.$set(e,"booking_number",n)},expression:"hotel.booking_number"}})],1)])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"d-block d-md-none col-12"},[n("vs-button",{attrs:{danger:""},on:{click:function(e){return t.removeHotel(s)}}},[t._v("\n              "+t._s(t.$t("form.delete"))+"\n            ")])],1)]),t._v(" "),t.h.length>1&&s!==t.h.length-1?n("div",{staticClass:"col-12"},[n("hr")]):t._e()])})),t._v(" "),n("div",{staticClass:"row justify-content-start mt-5"},[n("div",{staticClass:"col-auto"},[n("vs-button",{attrs:{success:""},on:{click:t.createNewHotel}},[t._v("\n            "+t._s(t.$t("invoice.buttons.add_hotel"))+"\n          ")])],1)]),t._v(" "),n("div",{staticClass:"row justify-content-end"},[n("div",{staticClass:"col-auto"},[n("vs-button",{attrs:{disabled:t.disabledNext},on:{click:t.next}},[t._v("\n            "+t._s(t.$t("invoice.buttons.next"))+"\n          ")])],1)])],2)])])}),[],!1,null,"1b9f5894",null).exports},7515:(t,e,n)=>{n.d(e,{Z:()=>d});var s=n(7757),a=n.n(s),i=n(9669),o=n.n(i);function r(t,e,n,s,a,i,o){try{var r=t[i](o),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(s,a)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var s,a,i=[],o=!0,r=!1;try{for(n=n.call(t);!(o=(s=n.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){r=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(r)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}const u={name:"Step4",comments:{Loader:n(5703).Z},props:{transferData:{required:!1,type:Object,default:null}},data:function(){return{airports:[],transports:[],loading:!0,transfer:{arrival_time:"",transport_id:"",arrival_airport_id:"",arrival_flight_code:"",departure_time:"",departure_airport_id:"",departure_flight_code:"",driver_number:"",driver_name:"",passengers:"",gid:!1}}},computed:{disabledNext:function(){var t=!1;return Object.entries(this.transfer).forEach((function(e){var n=c(e,2),s=n[0],a=n[1];console.log("".concat(s," ").concat(a)),""===a&&(t=!0)})),t}},mounted:function(){var t,e=this;return(t=a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null!==e.transferData&&(e.transfer=e.transferData),t.next=3,o().get("/api/airports").then((function(t){t.data.success?e.airports=t.data.payload.airports:e.$router.push({name:"dashboard.invoice.index"})})).catch((function(t){e.$router.push({name:"dashboard.invoice.index"})}));case 3:return t.next=5,o().get("/api/transports").then((function(t){t.data.success?(e.transports=t.data.payload.transports,e.loading=!1):e.$router.push({name:"dashboard.invoice.index"})})).catch((function(t){e.$router.push({name:"dashboard.invoice.index"})}));case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(s,a){var i=t.apply(e,n);function o(t){r(i,s,a,o,c,"next",t)}function c(t){r(i,s,a,o,c,"throw",t)}o(void 0)}))})()},methods:{next:function(){var t=this;this.$parent.next((function(){t.$parent.form.transfer=t.transfer}))}}};const d=(0,n(1900).Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-title px-3 pb-2 pt-4"},[n("h6",{staticClass:"fw-light text-reset"},[t._v("\n      "+t._s(t.$t("invoice.create.words.step"))+" 4 "+t._s(t.$t("invoice.create.words.in"))+" 6 "),n("span",{staticClass:"fw-bolder"},[t._v(t._s(t.$t("invoice.create.step_4.title")))])])]),t._v(" "),t.loading?n("div",{staticClass:"card-body"},[n("Loader")],1):n("div",{staticClass:"card-body p-0 pb-3"},[n("div",{staticClass:"mx-3 my-2"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-4 col-lg-3"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.arrival_time"),type:"datetime-local"},model:{value:t.transfer.arrival_time,callback:function(e){t.$set(t.transfer,"arrival_time",e)},expression:"transfer.arrival_time"}})],1),t._v(" "),n("div",{staticClass:"col-12 col-md-4 mt-2 mt-md-0 col-lg-3"},[n("vs-select",{staticClass:"mw-100",attrs:{placeholder:t.$t("invoice.inputs.airport")},model:{value:t.transfer.arrival_airport_id,callback:function(e){t.$set(t.transfer,"arrival_airport_id",e)},expression:"transfer.arrival_airport_id"}},t._l(t.airports,(function(e){return n("vs-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),1)],1)]),t._v(" "),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col-12 col-md-3 col-lg-2"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.arrival_flight_code")},model:{value:t.transfer.arrival_flight_code,callback:function(e){t.$set(t.transfer,"arrival_flight_code",e)},expression:"transfer.arrival_flight_code"}})],1)]),t._v(" "),n("div",{staticClass:"row mt-5"},[n("div",{staticClass:"col-12 col-md-4 col-lg-3"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.departure_time"),type:"datetime-local"},model:{value:t.transfer.departure_time,callback:function(e){t.$set(t.transfer,"departure_time",e)},expression:"transfer.departure_time"}})],1),t._v(" "),n("div",{staticClass:"col-12 col-md-4 mt-2 mt-md-0 col-lg-3"},[n("vs-select",{staticClass:"mw-100",attrs:{placeholder:t.$t("invoice.inputs.airport")},model:{value:t.transfer.departure_airport_id,callback:function(e){t.$set(t.transfer,"departure_airport_id",e)},expression:"transfer.departure_airport_id"}},t._l(t.airports,(function(e){return n("vs-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),1)],1)]),t._v(" "),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col-12 col-md-3 col-lg-2"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.departure_flight_code")},model:{value:t.transfer.departure_flight_code,callback:function(e){t.$set(t.transfer,"departure_flight_code",e)},expression:"transfer.departure_flight_code"}})],1)]),t._v(" "),n("div",{staticClass:"row mt-5"},[n("div",{staticClass:"col-12 col-md-4 col-lg-3"},[n("vs-select",{staticClass:"mw-100",attrs:{placeholder:t.$t("invoice.inputs.transport")},model:{value:t.transfer.transport_id,callback:function(e){t.$set(t.transfer,"transport_id",e)},expression:"transfer.transport_id"}},t._l(t.transports,(function(e){return n("vs-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),1)],1),t._v(" "),n("div",{staticClass:"col-12 col-md-4 mt-2 mt-md-0 col-lg-3"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.driver_number")},model:{value:t.transfer.driver_number,callback:function(e){t.$set(t.transfer,"driver_number",e)},expression:"transfer.driver_number"}})],1),t._v(" "),n("div",{staticClass:"col-12 col-md-4 mt-2 mt-md-0 col-lg-3"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.driver_name")},model:{value:t.transfer.driver_name,callback:function(e){t.$set(t.transfer,"driver_name",e)},expression:"transfer.driver_name"}})],1)]),t._v(" "),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col-12 col-md-4 col-lg-3"},[n("vs-input",{attrs:{placeholder:t.$t("invoice.inputs.passengers"),type:"number"},model:{value:t.transfer.passengers,callback:function(e){t.$set(t.transfer,"passengers",e)},expression:"transfer.passengers"}})],1)]),t._v(" "),n("div",{staticClass:"row mt-3"},[n("vs-checkbox",{model:{value:t.transfer.gid,callback:function(e){t.$set(t.transfer,"gid",e)},expression:"transfer.gid"}},[t._v("\n          "+t._s(t.$t("invoice.inputs.gid"))+"\n        ")])],1),t._v(" "),n("div",{staticClass:"row justify-content-end"},[n("div",{staticClass:"col-auto"},[n("vs-button",{attrs:{disabled:t.disabledNext},on:{click:t.next}},[t._v("\n            "+t._s(t.$t("invoice.buttons.next"))+"\n          ")])],1)])])])])}),[],!1,null,"39918c48",null).exports},1081:(t,e,n)=>{n.d(e,{Z:()=>d});var s=n(5703),a=n(538),i=n(9669),o=n.n(i);const r={name:"ChooseTemplate",props:{bus:{required:!0,type:a.default}},data:function(){return{active:!1,template_id:"",samples:[],loading:!0}},computed:{disableButton:function(){return""===this.template_id}},mounted:function(){this.bus.$on("open",this.open)},methods:{open:function(){var t=this;o().get("/api/samples").then((function(e){e.data.success?(t.samples=e.data.payload.samples,t.active=!0,setTimeout((function(){t.loading=!1}),500)):(t.$vs.notification({title:t.$t("notification.get.danger.title"),text:t.$t("notification.get.danger.text")}),t.$router.push({name:"dashboard.invoice.index"}))})).catch((function(e){t.$vs.notification({title:t.$t("notification.get.danger.title"),text:t.$t("notification.get.danger.text")}),t.$router.push({name:"dashboard.invoice.index"})}))},done:function(){var t,e=this;this.loading=!0,o().get("/api/samples/"+this.template_id).then((function(n){n.data.success?((t=n.data.payload.sample).days.forEach((function(t){null===t.resort&&(t.resort={id:""})})),e.bus.$emit("setTemplate",t),e.active=!1):e.error=n.data.message,e.loading=!1})).catch((function(t){e.$vs.notification({title:e.$t("notification.get.danger.title"),text:e.$t("notification.get.danger.text")}),e.loading=!1}))}}};var c=n(1900);const l=(0,c.Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vs-dialog",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"header",fn:function(){return[n("h4",{staticClass:"m-0"},[t._v("\n      "+t._s(t.$t("invoice.create.step_5.template.title"))+"\n    ")])]},proxy:!0},{key:"footer",fn:function(){return[n("div",{staticClass:"footer-dialog"},[n("vs-button",{attrs:{block:"",success:"",disabled:t.disableButton},on:{click:t.done}},[t._v("\n        "+t._s(t.$t("invoice.create.step_5.template.done"))+"\n      ")])],1)]},proxy:!0}]),model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("vs-select",{staticClass:"mw-100",model:{value:t.template_id,callback:function(e){t.template_id=e},expression:"template_id"}},t._l(t.samples,(function(e){return n("vs-option",{key:e.id,attrs:{value:e.id,label:e.name}},[t._v("\n          "+t._s(e.name)+"\n        ")])})),1)],1)])])}),[],!1,null,"e27d07f4",null).exports,u={name:"Step5",components:{Loader:s.Z,ChooseTemplate:l},props:{sample:{type:Object,require:!0,default:null}},data:function(){return{bus:new a.default,loading:!1,template:null,setTemplateFlag:!1,resorts:[]}},computed:{disabledNext:function(){var t=!1;return null===this.template||this.template.days.length<=0?t=!0:this.template.days.forEach((function(e){if((""===e.resort.id||null===e.resort.id)&&!1===e.free)return t=!0,0})),t}},watch:{template:{handler:function(t){this.$parent.form.sample=t},deep:!0}},mounted:function(){this.bus.$on("setTemplate",this.setTemplate),null!==this.sample&&this.setTemplate(this.sample)},methods:{setTemplate:function(t){null!==t?(t.days.forEach((function(t){null===t.resort&&(t.resort={id:""}),void 0===t.resort.id&&(t.resort.id="")})),this.template=t):this.template={days:[],name:""},this.loading=!0,this.setTemplateFlag=!0,this.getResorts()},getResorts:function(){var t=this;o().get("/api/resorts").then((function(e){e.data.success?(t.resorts=e.data.payload.resorts,t.loading=!1):(t.$vs.notification({title:t.$t("notification.get.danger.title"),text:t.$t("notification.get.danger.text")}),t.$router.push({name:"dashboard.invoice.index"}))})).catch((function(e){t.$vs.notification({title:t.$t("notification.get.danger.title"),text:t.$t("notification.get.danger.text")}),t.$router.push({name:"dashboard.invoice.index"})}))},addDay:function(){this.template.days.push({id:"",order:"",resort:{id:""},half_day:!1,free:!1})},removeDay:function(t){this.template.days=this.template.days.filter((function(e,n){return n!==t}))}}};const d=(0,c.Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-title px-3 pb-2 pt-4"},[n("h6",{staticClass:"fw-light text-reset"},[t._v("\n      "+t._s(t.$t("invoice.create.words.step"))+" 5 "+t._s(t.$t("invoice.create.words.in"))+" 6 "),n("span",{staticClass:"fw-bolder"},[t._v(t._s(t.$t("invoice.create.step_5.title")))])])]),t._v(" "),t.loading?n("div",{staticClass:"card-body p-0 pb-3"},[n("Loader")],1):n("div",{staticClass:"card-body p-0 pb-3"},[n("div",{staticClass:"mx-3 my-2"},[t.setTemplateFlag?n("div",[t._l(t.template.days,(function(e,s){return n("div",{key:s,staticClass:"row align-items-center my-2"},[n("div",{staticClass:"col-lg-auto col-sm-2 col-4"},[n("p",{staticClass:"mb-0"},[t._v("\n              "+t._s(t.$t("samples.edit.day",{number:s+1}))+"\n            ")])]),t._v(" "),n("div",{staticClass:"col-lg-auto col-sm-4 col-8"},[n("vs-select",{attrs:{disabled:e.free,placeholder:"Курорты"},model:{value:e.resort.id,callback:function(n){t.$set(e.resort,"id",n)},expression:"day.resort.id"}},t._l(t.resorts,(function(s){return n("vs-option",{key:s.id,attrs:{disabled:e.free,label:s.name,value:s.id}},[t._v("\n                "+t._s(s.name)+"\n              ")])})),1)],1),t._v(" "),n("div",{staticClass:"col-lg-auto col-sm-2 col-6 mt-2 mt-lg-0"},[n("vs-checkbox",{model:{value:e.free,callback:function(n){t.$set(e,"free",n)},expression:"day.free"}},[t._v("\n              "+t._s(t.$t("samples.edit.free_day"))+"\n            ")])],1),t._v(" "),n("div",{staticClass:"col-lg-auto col-sm-3 col-6 mt-2 mt-lg-0"},[n("vs-checkbox",{model:{value:e.half_day,callback:function(n){t.$set(e,"half_day",n)},expression:"day.half_day"}},[t._v("\n              "+t._s(t.$t("samples.edit.half_day"))+"\n            ")])],1),t._v(" "),n("div",{staticClass:"col-lg-auto col-sm col-6 mt-2 mt-lg-0"},[n("vs-button",{attrs:{circle:"",danger:"",flat:""},on:{click:function(e){return t.removeDay(s)}}},[n("em",{staticClass:"bx bx-trash-alt d-none d-lg-block"}),t._v(" "),n("span",{staticClass:"d-block d-lg-none"},[t._v(t._s(t.$t("form.delete")))])])],1),t._v(" "),t._m(0,!0)])})),t._v(" "),n("div",{staticClass:"row justify-content-between align-items-center mt-3"},[n("div",{staticClass:"col-auto"},[n("vs-button",{attrs:{gradient:""},on:{click:t.addDay}},[t._v("\n              "+t._s(t.$t("samples.edit.add_day"))+"\n            ")])],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("vs-button",{attrs:{disabled:t.disabledNext},on:{click:t.$parent.next}},[t._v("\n              "+t._s(t.$t("invoice.buttons.next"))+"\n            ")])],1)])],2):n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-auto"},[n("vs-button",{attrs:{success:""},on:{click:function(e){return t.bus.$emit("open")}}},[t._v("\n            "+t._s(t.$t("invoice.buttons.choose_template"))+"\n          ")])],1),t._v(" "),n("div",{staticClass:"col-12 col-md-auto"},[n("vs-button",{attrs:{flat:"",success:""},on:{click:function(e){return t.setTemplate(null)}}},[t._v("\n            "+t._s(t.$t("invoice.buttons.create_new_template"))+"\n          ")])],1)])])]),t._v(" "),n("ChooseTemplate",{attrs:{bus:t.bus}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12"},[e("hr",{staticClass:"d-block d-lg-none"})])}],!1,null,"5c692a6c",null).exports},7075:(t,e,n)=>{n.d(e,{Z:()=>a});const s={name:"Step6",props:{hotline:{type:Object}},data:function(){return{h:{},loading:!0}},computed:{costValid:function(){return this.h.cost.length<1},phoneValid:function(){return null===this.h.phone||this.h.phone.length<6}},watch:{h:{handler:function(t){this.$parent.form.hotline=t},deep:!0}},mounted:function(){var t,e;console.log(this.hotline),this.h={cost:null!==(t=this.hotline.cost)&&void 0!==t?t:"",phone:null!==(e=this.hotline.phone)&&void 0!==e?e:""},this.loading=!1}};const a=(0,n(1900).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"card"},[n("div",{staticClass:"card-title px-3 pb-2 pt-4"},[n("h6",{staticClass:"fw-light text-reset"},[t._v("\n        "+t._s(t.$t("invoice.create.words.step"))+" 6 "+t._s(t.$t("invoice.create.words.in"))+" 6 "),n("span",{staticClass:"fw-bolder"},[t._v(t._s(t.$t("invoice.create.step_6.title")))])])]),t._v(" "),n("transition",{attrs:{appea:"",mode:"out-in",name:"fade"}},[t.loading?n("div",{staticClass:"card-body px-3 pb-2 pt-4"},[n("Loader")],1):n("div",{staticClass:"card-body p-0 pb-3"},[n("div",{staticClass:"mx-3 my-2"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-6 col-lg-4"},[n("vs-input",{attrs:{danger:t.phoneValid,placeholder:t.$t("invoice.inputs.hotline.phone")},scopedSlots:t._u([{key:"icon",fn:function(){return[n("i",{staticClass:"bx bx-phone"})]},proxy:!0}]),model:{value:t.h.phone,callback:function(e){t.$set(t.h,"phone",e)},expression:"h.phone"}})],1),t._v(" "),n("div",{staticClass:"col-12 mt-2 mt-md-0 col-md-6 col-lg-4"},[n("vs-input",{attrs:{danger:t.costValid,placeholder:t.$t("invoice.inputs.hotline.cost"),type:"number"},scopedSlots:t._u([{key:"icon",fn:function(){return[n("i",[t._v("$")])]},proxy:!0}]),model:{value:t.h.cost,callback:function(e){t.$set(t.h,"cost",e)},expression:"h.cost"}})],1)]),t._v(" "),n("div",{staticClass:"row justify-content-end"},[n("div",{staticClass:"col-auto"},[n("vs-button",{attrs:{flat:""},on:{click:t.$parent.next},scopedSlots:t._u([!1===t.costValid&&!1===t.phoneValid?{key:"animate",fn:function(){return[n("i",{staticClass:"bx bx-right-arrow-alt fs-2",attrs:{"aria-hidden":"true"}})]},proxy:!0}:{key:"animate",fn:function(){return[n("i",{staticClass:"bx bx-x fs-2",attrs:{"aria-hidden":"true"}})]},proxy:!0}],null,!0)},[t._v("\n                "+t._s(t.$t("invoice.buttons.next"))+"\n\n                ")])],1)])])])])],1)])}),[],!1,null,"0c925931",null).exports},6186:(t,e,n)=>{n.r(e),n.d(e,{default:()=>k});var s=n(7757),a=n.n(s),i=n(538),o=n(9669),r=n.n(o),c=n(7096),l=n(1839),u=n(6644),d=n(3925),p=n(7515),v=n(1081),m=n(7075),f=n(5703);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e,n,s,a,i,o){try{var r=t[i](o),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(s,a)}const g={name:"Create",components:{Stepper:c.Z,Step_1:l.Z,Step_2:u.Z,Step_3:d.Z,Step_4:p.Z,Step_5:v.Z,Step_6:m.Z,Loader:f.Z},data:function(){return{stepForm:1,bus:new i.default,companies:[],form:{company:"",user:{name:"",nationality:""},hotels:[],transfer:null,sample:null,hotline:{phone:"",cost:""}}}},computed:{step:{get:function(){return this.stepForm},set:function(t){console.log("Пришло на set",t),t<0||t>6?this.$vs.notification({duration:2e3,sticky:!0,position:"top-right",color:"danger",title:"Ошибка!",text:"Вы ушли за границу данных"}):(this.stepForm=t,console.log("Сохранило в set",t))}},companyError:function(){return(""===this.form.company||null===this.form.company)&&this.$t("invoice.errors.company")},userNameError:function(){return(""===this.form.user.name||null===this.form.user.name)&&this.$t("invoice.errors.user.name")},userNationalityError:function(){return(""===this.form.user.nationality||null===this.form.user.nationality)&&this.$t("invoice.errors.user.nationality")}},mounted:function(){var t,e=this;return(t=a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.bus.$on("changeStep",e.changeStep),t.next=3,r().get("/api/companies").then((function(t){e.companies=t.data.payload.companies})).catch((function(t){e.$vs.notification({title:e.$t("notification.get.danger.title"),text:e.$t("notification.get.danger.text")})}));case 3:return t.next=5,e.$root.$loading.finish();case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(s,a){var i=t.apply(e,n);function o(t){b(i,s,a,o,r,"next",t)}function r(t){b(i,s,a,o,r,"throw",t)}o(void 0)}))})()},methods:{changeStep:function(t){console.log("changeStep",t),this.step=t},notifyError:function(){this.$vs.notification({duration:2e3,sticky:!0,position:"top-right",color:"danger",title:this.$t("invoice.errors.validateInputs.title"),text:this.$t("invoice.errors.validateInputs.text")})},next:function(t){if(1===this.step){if(this.companyError)return this.notifyError(),!1;this.bus.$emit("setStatus",{step:this.step,status:"success"})}else if(2===this.step){if(this.userNationalityError||this.userNameError)return this.notifyError(),!1;this.bus.$emit("setStatus",{step:this.step,status:"success"})}else 3===this.step||4===this.step||5===this.step?this.bus.$emit("setStatus",{step:this.step,status:"success"}):6===this.step&&this.createInvoice();"function"==typeof t&&t()},createInvoice:function(){var t=this;this.loading=!0,r().post("/api/invoices",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.form)).then((function(e){e.data.success?t.$router.push({name:"dashboard.invoice.show",params:{id:e.data.payload.invoice.id}}):t.notifyError()})).catch((function(e){422===e.response.status?(t.$vs.notification({title:"Ошибка",text:e.response.data.message}),Object.keys(e.response.data.errors).forEach((function(n){t.$vs.notification({title:n.capitalize(),text:e.response.data.errors[n]})}))):404===e.response.status&&t.$vs.notification({title:"Ошибка",text:e.response.data.message})}))}}};var y=n(3379),x=n.n(y),$=n(6174),C={insert:"head",singleton:!1};x()($.Z,C);$.Z.locals;const k=(0,n(1900).Z)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{appear:"",mode:"out-in",name:"fade"}},[t.$root.$loading.show?n("Loader",{key:"1"}):n("div",{key:"2",attrs:{id:"groupCollapse"}},[n("div",{staticClass:"row justify-content-center mb-5"},[n("div",{staticClass:"col-12 col-mg-8 col-lg justify-content-center"},[n("Stepper",{attrs:{bus:t.bus,count:6}})],1)]),t._v(" "),n("div",{staticClass:"row mx-0"},[n("div",{staticClass:"col-12"},[n("transition",{attrs:{appear:"",mode:"out-in",name:"slide-fade"}},[1===t.stepForm?n("Step_1",{key:"1",attrs:{companies:t.companies}}):t._e(),t._v(" "),2===t.stepForm?n("Step_2",{key:"2"}):t._e(),t._v(" "),3===t.stepForm?n("Step_3",{key:"3",attrs:{"hotels-own":t.form.hotels}}):t._e(),t._v(" "),4===t.stepForm?n("Step_4",{key:"4",attrs:{"transfer-data":t.form.transfer}}):t._e(),t._v(" "),5===t.stepForm?n("Step_5",{key:"5",attrs:{sample:t.form.sample}}):t._e(),t._v(" "),6===t.stepForm?n("Step_6",{key:"6",attrs:{hotline:t.form.hotline}}):t._e()],1)],1)])])],1)}),[],!1,null,"86317376",null).exports}}]);
//# sourceMappingURL=c0297fac84a99f857e2e.js.map